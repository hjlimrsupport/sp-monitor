<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splashtop JP í†µí•© ëª¨ë‹ˆí„°ë§ ì„¼í„°</title>
    <!-- ê³ ê¸‰ í°íŠ¸ ë° ì•„ì´ì½˜ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #0055ff;
            --primary-light: #e6f0ff;
            --bg: #f8fafc;
            --text-main: #1e293b;
            --text-sub: #64748b;
            --border: #e2e8f0;
            --card-bg: #ffffff;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
        }

        .title-group h1 {
            font-size: 2rem;
            font-weight: 800;
            margin: 0;
            letter-spacing: -0.02em;
        }

        .title-group p {
            color: var(--text-sub);
            margin: 0.2rem 0 0 0;
        }

        .btn-help {
            background: white;
            border: 1px solid var(--border);
            padding: 0.6rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-sub);
            transition: all 0.2s;
        }

        .btn-help:hover {
            background: var(--border);
        }

        /* Action Buttons */
        .action-bar {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            transition: transform 0.1s, opacity 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-outline {
            background: white;
            border: 1px solid var(--border);
            color: var(--text-main);
        }

        .btn-danger {
            background: #fee2e2;
            color: var(--danger);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 1.2rem;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-sub);
            font-weight: 600;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 800;
            margin-top: 0.3rem;
            display: block;
        }

        .stat-delta {
            font-size: 0.85rem;
            font-weight: 700;
            margin-top: 0.2rem;
        }

        .delta-plus {
            color: var(--success);
        }

        .delta-minus {
            color: var(--danger);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 1.5rem;
            border-bottom: 2px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.8rem 0.2rem;
            font-weight: 700;
            color: var(--text-sub);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Report List */
        .report-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 0.8rem;
            overflow: hidden;
        }

        .item-header {
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .item-header:hover {
            background: #fafafa;
        }

        .badge {
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            margin-right: 0.8rem;
        }

        .badge-new {
            background: #dcfce7;
            color: #166534;
        }

        .badge-changed {
            background: #fef9c3;
            color: #854d0e;
        }

        .badge-deleted {
            background: #fee2e2;
            color: #991b1b;
        }

        .item-title {
            font-weight: 700;
            flex-grow: 1;
        }

        .item-content {
            padding: 1rem;
            border-top: 1px solid var(--border);
            background: #fcfcfc;
            display: none;
        }

        .url-link {
            color: var(--primary);
            font-size: 0.9rem;
            word-break: break-all;
            text-decoration: none;
        }

        .item-desc {
            margin-top: 0.5rem;
            font-size: 0.95rem;
            color: var(--text-main);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--primary-light);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .chart-container {
            height: 300px;
            background: white;
            border-radius: 12px;
            padding: 1rem;
            border: 1px solid var(--border);
        }
    </style>
</head>

<body>

    <div id="loading-overlay">
        <div class="spinner"></div>
        <p style="margin-top: 1rem; font-weight: 700;">ì‚¬ì´íŠ¸ ë¶„ì„ ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
    </div>

    <div class="container">
        <header>
            <div class="title-group">
                <h1>Splashtop JP í†µí•© ëª¨ë‹ˆí„°ë§</h1>
                <p>ì‚¬ì´íŠ¸ë§µ ì°¨ë¶„ ì¡°ì‚¬ë¥¼ í†µí•œ ì‹ ì†í•œ ë³€í™” ê°ì§€ ì„œë¹„ìŠ¤</p>
            </div>
            <button class="btn-help" onclick="toggleModal('help-modal', true)">â“ ë„ì›€ë§</button>
        </header>

        <section class="action-bar">
            <button class="btn btn-primary" onclick="runScan()">ğŸš€ ì‚¬ì´íŠ¸ ë¶„ì„ ì‹¤í–‰ (Run Scan)</button>
            <button class="btn btn-outline" onclick="runCleanup()">ğŸ§¹ ë°ì´í„° ì •ì œ</button>
            <button class="btn btn-danger" onclick="confirmReset()">ğŸ§¨ ë°ì´í„° ë¦¬ì…‹</button>
        </section>

        <section class="stats-grid" id="stats-grid">
            <div class="stat-card">
                <div class="stat-label">í˜„ì¬ ì „ì²´ URL</div>
                <span class="stat-value" id="stat-curr-count">--ê°œ</span>
            </div>
            <div class="stat-card">
                <div class="stat-label">ì´ì „ ëŒ€ë¹„ ì¦ê°</div>
                <div class="stat-delta" id="stat-delta">--</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ì˜¤ëŠ˜ ë¶„ì„ ì™„ë£Œ</div>
                <span class="stat-value" id="stat-today-run">--</span>
            </div>
            <div class="stat-card">
                <div class="stat-label">ìµœì¢… ì—…ë°ì´íŠ¸</div>
                <div id="stat-last-time" style="font-size: 0.9rem; font-weight: 700; margin-top:0.5rem">ë¯¸ì‹¤í–‰</div>
            </div>
        </section>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('report')">ğŸ“‹ ì‹¤ì‹œê°„ ë¦¬í¬íŠ¸</div>
            <div class="tab" onclick="switchTab('history')">ğŸ“ˆ íˆìŠ¤í† ë¦¬ ë° í†µê³„</div>
            <div class="tab" onclick="switchTab('all-urls')">ğŸ”— ì „ì²´ URL ëª©ë¡</div>
        </div>

        <div id="tab-report">
            <div id="report-container">
                <p style="text-align:center; color: var(--text-sub); padding: 3rem;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
            </div>
        </div>

        <div id="tab-history" style="display: none;">
            <div class="chart-container">
                <canvas id="historyChart"></canvas>
            </div>
            <h3 style="margin-top:2rem">ìµœê·¼ ì¡°ì‚¬ ê²°ê³¼ (ìµœì‹  10ê°œ)</h3>
            <div id="history-table-container"></div>
        </div>

        <div id="tab-all-urls" style="display: none;">
            <div class="stat-card" style="max-height: 500px; overflow-y: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <tbody id="url-list-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="help-modal">
        <div class="modal-content">
            <h2 style="margin-top: 0;">ğŸ“– ì‚¬ìš© ê°€ì´ë“œ</h2>
            <ol style="padding-left: 1.2rem; line-height: 1.8;">
                <li><strong>ë¶„ì„ ì‹¤í–‰</strong>: ìƒë‹¨ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‚¬ì´íŠ¸ë§µì„ ë¶„ì„í•˜ì—¬ ì‹ ê·œ/ìˆ˜ì •ëœ í˜ì´ì§€ë¥¼ ì°¾ìŠµë‹ˆë‹¤.</li>
                <li><strong>ê¸°ì¤€ì </strong>: ì˜¤ëŠ˜ ì²˜ìŒ ì‹¤í–‰í•œ ì‹œì ì˜ ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ë£¨ ë™ì•ˆì˜ ëª¨ë“  ë³€í™”ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.</li>
                <li><strong>ìƒíƒœê°’ ì•ˆë‚´</strong>:
                    <ul>
                        <li><b style="color:var(--success)">NEW</b>: ìƒˆë¡œ ì¶”ê°€ëœ ë‰´ìŠ¤/ë¸”ë¡œê·¸</li>
                        <li><b style="color:var(--warning)">CHANGED</b>: ë‚´ìš©ì´ ë°”ë€ í˜ì´ì§€</li>
                        <li><b style="color:var(--danger)">DELETED</b>: ì‚¬ë¼ì§„ í˜ì´ì§€</li>
                    </ul>
                </li>
            </ol>
            <button class="btn btn-outline" style="width: 100%; margin-top: 1rem;"
                onclick="toggleModal('help-modal', false)">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        let currentData = {};
        let historyChart = null;

        async function init() {
            await refreshData();
        }

        async function refreshData() {
            try {
                // í˜„ì¬ í˜ì´ì§€ì˜ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì • (GitHub Pages ëŒ€ì‘)
                const baseUrl = window.location.pathname.endsWith('/') ? window.location.pathname : window.location.pathname + '/';
                const ts = new Date().getTime();

                const fetchJson = async (file) => {
                    const r = await fetch(`./${file}?t=${ts}`);
                    if (!r.ok) throw new Error(`Failed to load ${file}`);
                    return await r.json();
                };

                // ë°ì´í„° ë¡œë”©
                const data = {
                    meta: await fetchJson('site_report_meta.json'),
                    summary: await fetchJson('site_summary.json'),
                    structure: await fetchJson('site_structure.json'),
                    history: await fetchJson('monitoring_history.json')
                };

                currentData = data;
                renderStats(data.meta);
                renderReport(data.summary);
                renderAllUrls(data.structure);
                renderHistory(data.history);
            } catch (e) {
                console.error("Data fetch failed", e);
                // ì¢€ ë” ì¹œì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€
                document.getElementById('report-container').innerHTML =
                    `<div class="stat-card" style="text-align:center; padding:3rem;">
                        <p style="font-size:1.2rem; font-weight:700;">ğŸ“¡ ë°ì´í„° ë™ê¸°í™” ì¤‘...</p>
                        <p style="color:var(--text-sub);">GitHub Actionsê°€ ì²« ë¶„ì„ ê²°ê³¼ë¥¼ ìƒì„± ì¤‘ì´ê±°ë‚˜, ë¸Œë¼ìš°ì €ê°€ íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. 1~2ë¶„ í›„ ìƒˆë¡œê³ ì¹¨í•´ ì£¼ì„¸ìš”.</p>
                    </div>`;
            }
        }

        function renderStats(meta) {
            if (!meta) return;
            document.getElementById('stat-curr-count').innerText = (meta.curr_count || 0) + 'ê°œ';
            const delta = (meta.curr_count || 0) - (meta.prev_count || 0);
            const deltaEl = document.getElementById('stat-delta');
            deltaEl.innerText = (delta >= 0 ? '+' : '') + delta + 'ê°œ';
            deltaEl.className = 'stat-delta ' + (delta >= 0 ? 'delta-plus' : 'delta-minus');

            const lastTime = meta.curr_time || "";
            document.getElementById('stat-last-time').innerText = lastTime.replace('T', ' ').substring(0, 16);

            const isToday = lastTime.startsWith(new Date().toISOString().split('T')[0]);
            document.getElementById('stat-today-run').innerText = isToday ? "ì™„ë£Œ" : "ë¯¸ì‹¤í–‰";
        }

        function renderReport(summary) {
            const container = document.getElementById('report-container');
            if (!summary || summary.length === 0) {
                container.innerHTML = '<p style="text-align:center; padding: 2rem;">ì•„ì§ ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ìŠ¤ìº”ì„ ì‹œì‘í•´ ì£¼ì„¸ìš”.</p>';
                return;
            }

            const interesting = summary.filter(s => ['new', 'changed', 'deleted', 'error'].includes(s.status));
            if (interesting.length === 0) {
                container.innerHTML = '<div class="stat-card" style="text-align: center; color: var(--success); font-weight: 700;">ğŸ‰ ê°ì§€ëœ ìƒˆë¡œìš´ ë³€í™”ê°€ ì—†ìŠµë‹ˆë‹¤. ì‚¬ì´íŠ¸ê°€ ì•ˆì •ì ì…ë‹ˆë‹¤.</div>';
                return;
            }

            let html = `<h3>ğŸ” ê°ì§€ëœ ì£¼ìš” ë³€í™” (${interesting.length}ê±´)</h3>`;
            interesting.forEach(item => {
                const title = (item.title === 'No Title' || !item.title) ? item.url.split('/').pop() : item.title;
                html += `
                <div class="report-item">
                    <div class="item-header" onclick="toggleItem(this)">
                        <span class="badge badge-${item.status}">${item.status.toUpperCase()}</span>
                        <span class="item-title">${title}</span>
                    </div>
                    <div class="item-content">
                        <a href="${item.url}" target="_blank" class="url-link">${item.url}</a>
                        <p class="item-desc">${item.description || 'ì„¤ëª… ì—†ìŒ'}</p>
                    </div>
                </div>`;
            });
            container.innerHTML = html;
        }

        function toggleItem(el) {
            const content = el.nextElementSibling;
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        }

        function renderAllUrls(struct) {
            const body = document.getElementById('url-list-body');
            let html = '';
            Object.keys(struct || {}).forEach(url => {
                html += `<tr><td style="padding: 0.5rem; border-bottom: 1px solid var(--border); font-size: 0.85rem;">${url}</td></tr>`;
            });
            body.innerHTML = html;
        }

        function renderHistory(history) {
            if (!history || history.length === 0) return;

            const labels = history.map(h => h.timestamp.split('T')[0]);
            const values = history.map(h => h.total_count);

            if (historyChart) historyChart.destroy();
            const ctx = document.getElementById('historyChart').getContext('2d');
            historyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ì „ì²´ URL ìˆ˜',
                        data: values,
                        borderColor: '#0055ff',
                        backgroundColor: 'rgba(0, 85, 255, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // Cumulative Summary (Last 7 Days)
            const now = new Date();
            const last7Days = new Date(now.getTime() - (7 * 24 * 60 * 60 * 1000));

            let cumulativeNew = new Set();
            let cumulativeDel = new Set();

            history.forEach(h => {
                const hDate = new Date(h.timestamp);
                if (hDate >= last7Days) {
                    (h.new_details || []).forEach(u => cumulativeNew.add(u));
                    (h.deleted_details || []).forEach(u => cumulativeDel.add(u));
                }
            });

            let cumuHtml = `
            <div class="stat-card" style="border-left: 5px solid var(--primary); margin: 2rem 0; background: #f0f7ff;">
                <h4 style="margin:0 0 0.5rem 0;">ğŸ“… ìµœê·¼ 7ì¼ê°„ ëˆ„ì  ë³€í™” ìš”ì•½</h4>
                <p style="font-size:0.85rem; color:var(--text-sub); margin-bottom:1rem;">ê°€ë” ë°©ë¬¸í•˜ì…”ë„ ê´œì°®ìŠµë‹ˆë‹¤! ì§€ë‚œ ì¼ì£¼ì¼ê°„ ì‚¬ì´íŠ¸ì— ìƒˆë¡œ ì¶”ê°€ë˜ê±°ë‚˜ ì‚­ì œëœ ëª¨ë“  í˜ì´ì§€ë¥¼ ëª¨ì•„ì„œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</p>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div>
                        <b style="color:var(--success)">[+] ì¼ì£¼ì¼ê°„ ì‹ ê·œ ì¶”ê°€ (${cumulativeNew.size}ê±´)</b>
                        <ul style="font-size:0.8rem; margin-top:0.5rem; max-height:180px; overflow-y:auto; padding-left:1.2rem; background: white; border-radius: 8px; border: 1px solid var(--border);">
                            ${Array.from(cumulativeNew).map(u => `<li style="margin-bottom:4px"><a href="${u}" target="_blank" style="color:inherit;">${u.split('/').pop() || u}</a></li>`).join('') || '<li style="color:#aaa; padding:10px;">ì—†ìŒ</li>'}
                        </ul>
                    </div>
                    <div>
                        <b style="color:var(--danger)">[-] ì¼ì£¼ì¼ê°„ ì‚­ì œ/ì œì™¸ (${cumulativeDel.size}ê±´)</b>
                        <ul style="font-size:0.8rem; margin-top:0.5rem; max-height:180px; overflow-y:auto; padding-left:1.2rem; background: white; border-radius: 8px; border: 1px solid var(--border);">
                            ${Array.from(cumulativeDel).map(u => `<li style="margin-bottom:4px">${u.split('/').pop() || u}</li>`).join('') || '<li style="color:#aaa; padding:10px;">ì—†ìŒ</li>'}
                        </ul>
                    </div>
                </div>
            </div>`;

            // Table
            let tableHtml = cumuHtml + '<h3 style="margin-top:2.5rem">ğŸ“œ ê°œë³„ ì¡°ì‚¬ ì´ë ¥</h3><table style="width:100%; border-collapse: collapse; margin-top:1rem; text-align:left; border: 1px solid var(--border);">';
            tableHtml += '<thead style="background:#f1f5f9"><tr><th style="padding:0.7rem">ë‚ ì§œ/ì‹œê°„</th><th>ì „ì²´</th><th>ì‹ ê·œ</th><th>ì‚­ì œ</th><th>ìƒì„¸</th></tr></thead><tbody>';
            history.slice().reverse().forEach((h, idx) => {
                const rowId = `history-row-${idx}`;
                const hasDetails = (h.new_count > 0 || h.deleted_count > 0);

                tableHtml += `
                <tr style="border-bottom:1px solid var(--border)">
                    <td style="padding:0.6rem; color:var(--text-sub); font-size:0.85rem">${h.timestamp.replace('T', ' ').substring(0, 16)}</td>
                    <td><b>${h.total_count}</b></td>
                    <td style="color:var(--success)">+${h.new_count}</td>
                    <td style="color:var(--danger)">-${h.deleted_count}</td>
                    <td>${hasDetails ? `<button class="btn-help" style="padding: 0.2rem 0.5rem; font-size: 0.75rem;" onclick="toggleHistoryDetails('${rowId}')">ë³´ê¸°</button>` : '-'}</td>
                </tr>
                <tr id="${rowId}" style="display:none; background: #fdfdfd; border-bottom: 1px solid var(--border);">
                    <td colspan="5" style="padding: 1rem; font-size: 0.85rem;">
                        ${h.new_count > 0 ? `
                            <div style="margin-bottom:0.5rem"><b style="color:var(--success)">[ì‹ ê·œ ì¶”ê°€ëœ í˜ì´ì§€]</b></div>
                            <ul style="margin: 0 0 1rem 0; padding-left: 1.2rem; color: var(--text-sub);">
                                ${h.new_details.map(url => `<li><a href="${url}" target="_blank" style="color:inherit;">${url}</a></li>`).join('')}
                            </ul>
                        ` : ''}
                        ${h.deleted_count > 0 ? `
                            <div><b style="color:var(--danger)">[ì‚­ì œ/ì œì™¸ëœ í˜ì´ì§€]</b></div>
                            <ul style="margin: 0; padding-left: 1.2rem; color: var(--text-sub);">
                                ${h.deleted_details.map(url => `<li>${url}</li>`).join('')}
                            </ul>
                        ` : ''}
                    </td>
                </tr>`;
            });
            tableHtml += '</tbody></table>';
            document.getElementById('history-table-container').innerHTML = tableHtml;
        }

        function toggleHistoryDetails(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'table-row' ? 'none' : 'table-row';
        }

        async function runScan() {
            document.getElementById('loading-overlay').style.display = 'flex';
            try {
                const res = await fetch('/api/scan', { method: 'POST' });
                if (res.ok) await refreshData();
            } finally {
                document.getElementById('loading-overlay').style.display = 'none';
            }
        }

        async function runCleanup() {
            if (!confirm("ë°ì´í„° ì •ì œë¥¼ ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
            const res = await fetch('/api/cleanup', { method: 'POST' });
            if (res.ok) { alert("ë°ì´í„° ì •ì œ ì™„ë£Œ"); await refreshData(); }
        }

        async function confirmReset() {
            if (!confirm("âš ï¸ ì£¼ì˜: ëª¨ë“  ëª¨ë‹ˆí„°ë§ ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
            const res = await fetch('/api/reset', { method: 'POST' });
            if (res.ok) { window.location.reload(); }
        }

        function switchTab(name) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('tab-report').style.display = name === 'report' ? 'block' : 'none';
            document.getElementById('tab-history').style.display = name === 'history' ? 'block' : 'none';
            document.getElementById('tab-all-urls').style.display = name === 'all-urls' ? 'block' : 'none';
        }

        function toggleModal(id, show) {
            document.getElementById(id).style.display = show ? 'flex' : 'none';
        }

        init();
    </script>
</body>

</html>